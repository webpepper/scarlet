!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Scarlet=e():t.Scarlet=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=12)}([function(t,e,n){"use strict";(function(e){function r(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function i(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function o(t){return Object.prototype.toString.call(t)}function u(t){return!i(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function s(t){if(w.isFunction(t)){if(E)return t.name;var e=t.toString(),n=e.match(j);return n&&n[1]}}function c(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function a(t){if(E||!w.isFunction(t))return w.inspect(t);var e=s(t);return"[Function"+(e?": "+e:"")+"]"}function f(t){return c(a(t.actual),128)+" "+t.operator+" "+c(a(t.expected),128)}function l(t,e,n,r,i){throw new O.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function p(t,e){t||l(t,!0,e,"==",O.ok)}function h(t,e,n,s){if(t===e)return!0;if(i(t)&&i(e))return 0===r(t,e);if(w.isDate(t)&&w.isDate(e))return t.getTime()===e.getTime();if(w.isRegExp(t)&&w.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(u(t)&&u(e)&&o(t)===o(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;s=s||{actual:[],expected:[]};var c=s.actual.indexOf(t);return-1!==c&&c===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),y(t,e,n,s))}return n?t===e:t==e}function v(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function y(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(w.isPrimitive(t)||w.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=v(t),o=v(e);if(i&&!o||!i&&o)return!1;if(i)return t=_.call(t),e=_.call(e),h(t,e,n);var u,s,c=S(t),a=S(e);if(c.length!==a.length)return!1;for(c.sort(),a.sort(),s=c.length-1;s>=0;s--)if(c[s]!==a[s])return!1;for(s=c.length-1;s>=0;s--)if(u=c[s],!h(t[u],e[u],n,r))return!1;return!0}function g(t,e,n){h(t,e,!0)&&l(t,e,n,"notDeepStrictEqual",g)}function d(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function m(t){var e;try{t()}catch(t){e=t}return e}function b(t,e,n,r){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=m(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&l(i,n,"Missing expected exception"+r);var o="string"==typeof r,u=!t&&w.isError(i),s=!t&&i&&!n;if((u&&o&&d(i,n)||s)&&l(i,n,"Got unwanted exception"+r),t&&i&&n&&!d(i,n)||!t&&i)throw i}var w=n(1),x=Object.prototype.hasOwnProperty,_=Array.prototype.slice,E=function(){return"foo"===function(){}.name}(),O=t.exports=p,j=/\s*function\s+([^\(\s]*)\s*/;O.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var e=t.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,i=s(e),o=r.indexOf("\n"+i);if(o>=0){var u=r.indexOf("\n",o+1);r=r.substring(u+1)}this.stack=r}}},w.inherits(O.AssertionError,Error),O.fail=l,O.ok=p,O.equal=function(t,e,n){t!=e&&l(t,e,n,"==",O.equal)},O.notEqual=function(t,e,n){t==e&&l(t,e,n,"!=",O.notEqual)},O.deepEqual=function(t,e,n){h(t,e,!1)||l(t,e,n,"deepEqual",O.deepEqual)},O.deepStrictEqual=function(t,e,n){h(t,e,!0)||l(t,e,n,"deepStrictEqual",O.deepStrictEqual)},O.notDeepEqual=function(t,e,n){h(t,e,!1)&&l(t,e,n,"notDeepEqual",O.notDeepEqual)},O.notDeepStrictEqual=g,O.strictEqual=function(t,e,n){t!==e&&l(t,e,n,"===",O.strictEqual)},O.notStrictEqual=function(t,e,n){t===e&&l(t,e,n,"!==",O.notStrictEqual)},O.throws=function(t,e,n){b(!0,t,e,n)},O.doesNotThrow=function(t,e,n){b(!1,t,e,n)},O.ifError=function(t){if(t)throw t};var S=Object.keys||function(t){var e=[];for(var n in t)x.call(t,n)&&e.push(n);return e}}).call(e,n(6))},function(t,e,n){(function(t,r){function i(t,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(n)?r.showHidden=n:n&&e._extend(r,n),x(r.showHidden)&&(r.showHidden=!1),x(r.depth)&&(r.depth=2),x(r.colors)&&(r.colors=!1),x(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),c(r,t,r.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function u(t,e){return t}function s(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function c(t,n,r){if(t.customInspect&&n&&S(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return b(i)||(i=c(t,i,r)),i}var o=a(t,n);if(o)return o;var u=Object.keys(n),y=s(u);if(t.showHidden&&(u=Object.getOwnPropertyNames(n)),j(n)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return f(n);if(0===u.length){if(S(n)){var g=n.name?": "+n.name:"";return t.stylize("[Function"+g+"]","special")}if(_(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(O(n))return t.stylize(Date.prototype.toString.call(n),"date");if(j(n))return f(n)}var d="",m=!1,w=["{","}"];if(v(n)&&(m=!0,w=["[","]"]),S(n)){d=" [Function"+(n.name?": "+n.name:"")+"]"}if(_(n)&&(d=" "+RegExp.prototype.toString.call(n)),O(n)&&(d=" "+Date.prototype.toUTCString.call(n)),j(n)&&(d=" "+f(n)),0===u.length&&(!m||0==n.length))return w[0]+d+w[1];if(r<0)return _(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var x;return x=m?l(t,n,r,y,u):u.map(function(e){return p(t,n,r,y,e,m)}),t.seen.pop(),h(x,d,w)}function a(t,e){if(x(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):y(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,n,r,i){for(var o=[],u=0,s=e.length;u<s;++u)L(e,String(u))?o.push(p(t,e,n,r,String(u),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(t,e,n,r,i,!0))}),o}function p(t,e,n,r,i,o){var u,s,a;if(a=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},a.get?s=a.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):a.set&&(s=t.stylize("[Setter]","special")),L(r,i)||(u="["+i+"]"),s||(t.seen.indexOf(a.value)<0?(s=g(n)?c(t,a.value,null):c(t,a.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),x(u)){if(o&&i.match(/^\d+$/))return s;u=JSON.stringify(""+i),u.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=t.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=t.stylize(u,"string"))}return u+": "+s}function h(t,e,n){var r=0;return t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function v(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function g(t){return null===t}function d(t){return null==t}function m(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function x(t){return void 0===t}function _(t){return E(t)&&"[object RegExp]"===N(t)}function E(t){return"object"==typeof t&&null!==t}function O(t){return E(t)&&"[object Date]"===N(t)}function j(t){return E(t)&&("[object Error]"===N(t)||t instanceof Error)}function S(t){return"function"==typeof t}function A(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function N(t){return Object.prototype.toString.call(t)}function F(t){return t<10?"0"+t.toString(10):t.toString(10)}function P(){var t=new Date,e=[F(t.getHours()),F(t.getMinutes()),F(t.getSeconds())].join(":");return[t.getDate(),k[t.getMonth()],e].join(" ")}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var D=/%[sdj%]/g;e.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,o=r.length,u=String(t).replace(D,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),s=r[n];n<o;s=r[++n])g(s)||!E(s)?u+=" "+s:u+=" "+i(s);return u},e.deprecate=function(n,i){function o(){if(!u){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),u=!0}return n.apply(this,arguments)}if(x(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var u=!1;return o};var T,I={};e.debuglog=function(t){if(x(T)&&(T=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!I[t])if(new RegExp("\\b"+t+"\\b","i").test(T)){var n=r.pid;I[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else I[t]=function(){};return I[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=v,e.isBoolean=y,e.isNull=g,e.isNullOrUndefined=d,e.isNumber=m,e.isString=b,e.isSymbol=w,e.isUndefined=x,e.isRegExp=_,e.isObject=E,e.isDate=O,e.isError=j,e.isFunction=S,e.isPrimitive=A,e.isBuffer=n(14);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",P(),e.format.apply(e,arguments))},e.inherits=n(15),e._extend=function(t,e){if(!e||!E(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,n(6),n(7))},function(t,e,n){function r(){"use strict";var t=this;n(3);t.__typename__="scarlet.lib.extensions.Object",t.has=function(t,e){return hasOwnProperty.call(t,e)},t.isObject=function(t){return t instanceof Object},t.isFunction=function(t){return t instanceof Function},t.isNull=function(t){return"object"==typeof t?null===t:void 0===t},t.inherit=function(t,e){t.__super__=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0}})},t.name=function(t){if(!t)return"undefined";if(t.name)return t.name;if(t.constructor&&t.constructor.name)return t.constructor.name;var e=/function\s([^(]{1,})\(/,n=e.exec(t.toString());return n&&n.length>1?n[1].trim():t instanceof Function?"Function":"Object"},t.objectHasFunction=function(t,e){for(var n in t)if(t[n]==e)return!0;return!1},t.extend=function(t,e){for(var n in t)e[n]=t[n]}}t.exports=new r},function(t,e,n){function r(){"use strict";var t=this;t.__typename__="scarlet.lib.extensions.Enumerable",t.arrayFor=function(t,e){for(var n=0;n<t.length;n++)e(t[n],n,t)},t.funcFor=function(t,e){for(var n in t)e(t[n],n,t)},t.stringFor=function(e,n){t.arrayFor(e.split(""),function(t,r){n(t,r,e)})},t.allEach=function(t,e){Object.getOwnPropertyNames(t).forEach(function(n){e(t[n],n,t)})},t.forEach=function(e,n){if(e){var r=t.funcFor;e instanceof Function?r=t.funcFor:"string"==typeof e?r=t.stringFor:"number"==typeof e.length&&(r=t.arrayFor),r(e,n)}},t.any=function(e,n){var r=!1;return t.forEach(e,function(t,e){n(t,e)&&(r=!0)}),r},t.where=function(e,n){var r=[];return t.forEach(e,function(t){n(t)&&r.push(t)}),r},t.first=function(e,n){if(void 0===n&&void 0!==e&&e.length>0)return e[0];var r=t.where(e,n);return r.length>0?r[0]:null},t.mapSeries=function(e,n,r){if(i("number"==typeof e.length,"Object to map must be an array"),!this)return new t.mapSeries(e,n,r);var o=[],u=this,s=0,c=function(){var t=e[s];return s++,t},a=null;u._proceed=function(t,e){void 0!==e&&o.push(e);var i=c();return i?n(t,i,u._proceed):r&&(a=r(t,o)),a},u._proceed()}}var i=n(0);t.exports=new r},function(t,e,n){var r=n(0),i=n(2),o=n(8);t.exports=function t(e,n){"use strict";return this instanceof t?(r(e),this.__typename__="scarlet.lib.proxies.ProxyMetadata",this.reflection={},this.hasShadow=function(){return i.has(e,"__scarlet__")},this.ensureShadow=function(){return this.hasShadow()||(e.__scarlet__={}),o.debug(t,"ensureShadow","Shadow Object Created",[e]),this},this.reflection.isAllowed=function(){var e="__scarlet__"!=n;return o.debug(t,"isAllowed","Is Allowed For Proxy?",[e]),e},this.reflection.isMethod=function(){var r=!i.isNull(e)&&!i.isNull(n)&&!i.isNull(e[n])&&i.isFunction(e[n]);return o.info(t,"isMethod","Is Method?",[r]),r},this.reflection.isFunction=function(){var r=i.isNull(n)&&i.isFunction(e);return o.info(t,"isFunction","Is Function?",[r]),r},this.reflection.isProperty=function(){var r=!i.isFunction(e[n]);return o.info(t,"isProperty","Is Property?",[r]),r},this.reflection.isInstance=function(){this.isFunction();var r=i.isNull(n)&&i.isObject(e);return o.info(t,"isInstance","Is Instance?",[r]),r},this.reflection.isPrototype=function(){var r=i.isNull(n)&&i.isFunction(e)&&!i.isNull(e.prototype);return o.info(t,"isPrototype","Is Prototype?",[r]),r},this.reflection.hasMember=function(){return!i.isNull(n)},this):new t(e,n)}},function(t,e,n){(function(e){function r(){"use strict";var t=this;t.directoryPath=e+"/../../../",t.setDirectory=function(e){t.directoryPath=e},t.load=function(e,r){o(e);var u=i.normalize(t.directoryPath+r),s=n(23)(u+""),c=new s(e);return c.initialize(),c}}var i=n(22),o=n(0);t.exports=r}).call(e,"/")},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(f===setTimeout)return setTimeout(t,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function o(t){if(l===clearTimeout)return clearTimeout(t);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function u(){y&&h&&(y=!1,h.length?v=h.concat(v):g=-1,v.length&&s())}function s(){if(!y){var t=i(u);y=!0;for(var e=v.length;e;){for(h=v,v=[];++g<e;)h&&h[g].run();g=-1,e=v.length}h=null,y=!1,o(t)}}function c(t,e){this.fun=t,this.array=e}function a(){}var f,l,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(t){f=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(t){l=r}}();var h,v=[],y=!1,g=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];v.push(new c(t,e)),1!==v.length||y||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=a,p.addListener=a,p.once=a,p.off=a,p.removeListener=a,p.removeAllListeners=a,p.emit=a,p.prependListener=a,p.prependOnceListener=a,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,n){function r(){"use strict";var t=this;t.DEBUG=4,t.INFO=3,t.WARN=2,t.ERROR=1,t.NONE=0,t.logLevel=t.NONE,t.log=console.log;var e=function(t){if("string"==typeof t)return t;var e=t.toString();return e=e.substr("function ".length),e=e.substr(0,e.indexOf("(")),""!==e&&null!==e&&void 0!==e||(e="function<anonymous>"),e},n=function(t){var e="";"string"==typeof t?e+=t:"string"!=typeof t&&(e=t.toString()),"[object Object]"==e&&(e+="");var n=e.indexOf("("),r=e.indexOf(")");return-1===n||-1===r?[]:(e=e.slice(e.indexOf("(")+1,e.indexOf(")")),e.split(","))};t.print=function(r,i,s,c,a){if(a=null===a?"":"\n"+o(a).replace(/\n/g,"\n"),"object"!=typeof c&&"function"!=typeof c||(c=o(c,{depth:10,showHidden:!0})),"string"==typeof s&&!u.isNull(i)&&!u.isNull(i[s])){var f=s,l=i[s];return void t.log(r+e(i)+"::"+f+"("+n(l).join(",")+") - "+c+a+"\n")}return!u.isNull(i)&&u.isNull(s)?void t.log(r+e(s)+"("+n(i).join(",")+") - "+c+a+"\n"):u.isNull(i)&&!u.isNull(s)?void t.log(r+e(s)+"("+n(s).join(",")+") - "+c+a+"\n"):u.isNull(i)||u.isNull(s)?void 0:void t.log(r+e(i)+"::"+e(s)+"("+n(s).join(",")+") - "+c+a+"\n")},t.debug=function(e,n,r,i){t.logLevel==t.DEBUG&&t.print("DEBUG @ ["+(new Date).toString()+"] -> ",e,n,r,i)},t.info=function(e,n,r,i){t.logLevel>=t.INFO&&t.print("INFO  @ ["+(new Date).toString()+"] -> ",e,n,r,i)},t.warn=function(e,n,r,i){t.logLevel>=t.WARN&&t.print("WARN  @ ["+(new Date).toString()+"] -> ",e,n,r,i)},t.error=function(e,n,r,i){t.logLevel>=t.ERROR&&t.print("ERROR @ ["+(new Date).toString()+"] -> ",e,n,r,i)}}var i=n(1),o=i.inspect,u=(n(0),n(2));t.exports=new r},function(t,e,n){var r=n(0);t.exports=function(t,e){"use strict";r(e),r(t);var n=t[e];this.__typename__="scarlet.lib.proxies.ProxyMethod",this.wrap=function(i){return r(i),t[e]=function(){var r=Array.prototype.slice.call(arguments);return i.call(t,e,n,r)},this},this.unwrap=function(){return t[e]=n,this}}},function(t,e,n){var r=n(0);t.exports=function(t,e){"use strict";r(e),r(t);var n=t[e];this.__typename__="scarlet.lib.proxies.ProxyProperty",this.wrap=function(n){return r(n),Object.defineProperty(t,e,{get:function(){return i(n)},set:function(t){o(n,t)}}),this};var i=function(r){return r.call(t,e,function(){return n})},o=function(r,i){return r.call(t,e,function(){n=i})};this.unwrap=function(){return delete t[e],t[e]=n,this}}},function(t,e,n){var r=n(0),i=n(9),o=n(4),u=n(10),s=n(3);t.exports=function t(e){"use strict";if(!(this instanceof t))return new t(e);r(e);var n=[];this.__typename__="scarlet.lib.proxies.ProxyInstance",this.wrap=function(t){return r(t),c(e,function(e){e.wrap(t),n.push(e)}),this},this.unwrap=function(){return s.forEach(n,function(t){t.unwrap()}),this};var c=function(t,e){e&&s.forEach(t,function(n,s){r(s);var c=new o(t,s).ensureShadow();if(c.reflection.isAllowed())return c.reflection.isMethod()?e(new i(t,s)):c.reflection.isProperty()?e(new u(t,s)):void 0})}}},function(t,e,n){t.exports=n(13)},function(t,e,n){function r(t){"use strict";if(!(this instanceof r))return new r(t);var e=null,n=new a,i=this;i.plugins={},i.__typename__="scarlet.lib.Scarlet",i.intercept=function(t,n){return u(t,"Please make sure you supply a typeOrInstance parameter. eg. scarlet.intercept(MyFunc, scarlet.type.asInstance());"),s.info(r,"intercept","For Type Or Instance",[t]),e=new c,e.observable=t,e.intercept(t,n,function(t){e.observable=t}),e.using(i.beforeEventEmitterInterceptor),i},i.using=function(t){return u(t),u(e),s.info(r,"using","Using Interceptor",[t]),e.using(t),i},i.beforeEventEmitterInterceptor=function(t,n){u(e),i.emit("before",t),n()},i.afterEventEmitterInterceptor=function(t,n,r){if(u(e),void 0!==t&&null!==t)throw n.error=t,i.emit("error",n),t;var o=null;try{o=r(),i.emit("after",n)}catch(t){throw n.error=t,i.emit("error",n),t}return i.emit("done",n),o},i.proxy=function(){return u(e),u(e.observable),s.info(r,"proxy","As Proxied Type Or Instance",[e.observable]),e.using(i.afterEventEmitterInterceptor),e.observable},i.load=function(t){return u(t),n.load(i,t),i},i.interceptQuery=function(t,e){return new f(t,e)};i.on("error",function(t){s.error(r,"Event","error event",[t])}),function(){"string"==typeof t&&(t=[t]),t&&t.length&&t.forEach(function(t){i.load(t)})}(),o.EventEmitter.call(i)}var i=n(1),o=n(16),u=n(0),s=n(8),c=n(17),a=n(5),f=n(24);i.inherits(r,o.EventEmitter),t.exports=r},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function u(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,i,s,c,a;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var f=new Error('Uncaught, unspecified "error" event. ('+e+")");throw f.context=e,f}if(n=this._events[t],u(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),a=n.slice(),i=a.length,c=0;c<i;c++)a[c].apply(this,s);return!0},n.prototype.addListener=function(t,e){var i;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=u(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,i,u,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],u=n.length,i=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(s=u;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){var r=n(0),i=n(18),o=n(3),u=n(19);t.exports=function(){"use strict";var t=this;t.proxy=null,t.interceptors=[],t.__typename__="scarlet.lib.interceptors.Interceptor",t.intercept=function(n,i,o){return r(n),r(o),t.proxy=new u(n,i),t.proxy.intercept(e,o),t},t.using=function(e){return r(t.proxy,"Please make sure you are intercepting something first"),t.interceptors.push(e),t};var e=function(e,o,u){r(t.interceptors.length>0,"Please make sure you add an interceptor");var s=this,c=new i(s,e,o,u);return n(s,c,function(t,e){if(t)throw t;return c.result=c.proceed(),e.length>0&&(c.result=e[e.length-1]),c.result}),c.result},n=function(e,n,r){o.mapSeries(t.interceptors,function(t,r,i){return t&&s(r)<3?i(t):1===s(r)?r.call(e,i):2===s(r)?r.call(e,n,i):r.call(e,t,n,i)},r)}};var s=function(t){return"function"!=typeof t?0:t.length}},function(t,e,n){var r=n(0),i=n(2);t.exports=function(t,e,n,o){"use strict";r(n,"invocationMethod == null");var u=this;o||(o=[]),u.args=o,u.context=t,u.result=null,u.method=n,u.contextName=function(){return i.name(u.context)},u.memberName=function(){return e||i.name(u.method)},u.executionStartDate=null,u.executionEndDate=null,u.proceed=function(){var t=Array.prototype.slice.call(u.args);return u.executionStartDate=new Date,u.result=u.method.apply(u.context,t),u.executionEndDate=new Date,u.result}}},function(t,e,n){var r=n(0),i=n(9),o=n(4),u=n(10),s=n(11),c=n(20),a=n(21);t.exports=function(t,e){"use strict";r(t),this.proxy=null,this.__typename__="scarlet.lib.proxies.ProxyInterceptor",this.intercept=function(i,u){r(i),r(u),o(t,e).ensureShadow(),this.proxy=n().wrap(i,u)},this.release=function(){this.proxy&&this.proxy.unwrap()};var n=function(){return e?f():t.prototype?new a(t):"function"==typeof t?new c(t):new s(t)},f=function(){if(e)return"function"==typeof t[e]?new i(t,e):new u(t,e)}}},function(t,e,n){var r=n(0);t.exports=function(t){"use strict";r(t),this.__typename__="scarlet.lib.proxies.ProxyFunction",this.wrap=function(e,n){r(e);var i=function(){var n=Array.prototype.slice.call(arguments);return e.call(this,t.name,t,n)};return n&&n(i),this},this.unwrap=function(){return t}}},function(t,e,n){var r=n(1),i=n(0),o=n(2),u=n(4),s=n(11);n(3);t.exports=function(t){"use strict";i(t),i(t.prototype);var e=this;e.whenCalled=null,e.__typename__="scarlet.lib.proxies.ProxyPrototype",e.wrap=function(o,u){return i(o),e.whenCalled=o,r.inherits(n,t),u&&u(n),e},e.unwrap=function(){return t};var n=function(){var n=this||{},r=Array.prototype.slice.call(arguments),i=c(n);return e.whenCalled.call(t.name,n,i,r)},c=function(e){return function(){var n=Array.prototype.slice.call(arguments),r=t.apply(e,n);return a(e),r}},a=function(t){u(t).hasShadow()||(u(t).ensureShadow(),o.objectHasFunction(t,n)||s(t).wrap(e.whenCalled))}}},function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var u=o>=0?arguments[o]:t.cwd();if("string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(e=u+"/"+e,i="/"===u.charAt(0))}return e=n(r(e.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+e||"."},e.normalize=function(t){var i=e.isAbsolute(t),o="/"===u(t,-1);return t=n(r(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),u=Math.min(i.length,o.length),s=u,c=0;c<u;c++)if(i[c]!==o[c]){s=c;break}for(var a=[],c=s;c<i.length;c++)a.push("..");return a=a.concat(o.slice(s)),a.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},e.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){return o(t)[3]};var u="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(e,n(7))},function(t,e,n){function r(t){return n(i(t))}function i(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var o={"./plugin-manager":5,"./plugin-manager.js":5};r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=23},function(t,e,n){var r=n(0),i=function(t,e){"use strict";r(e,"info=null"),r(t,"proceed=null");var n=this;n.args=e.args,n.result=e.result,n.memberName=e.memberName,n.hasResult=void 0!==e.result,n.hasArgs=void 0!==e.args,n.argsEmpty=null!==e.args&&void 0!==e.args&&0===e.args.length,n.traceTo=function(t){var r=n.hasResult?e.result:"void";t((e.memberName?e.memberName:"")+"("+(!n.hasArgs||n.argsEmpty?"":JSON.stringify(e.args))+"):"+r)}};t.exports=i}])});